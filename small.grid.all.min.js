(function(d,b){d.extend(true,b,{Callback:{Handler:c,Create:a}});function c(){this.handlers=[];this.isLocked=false;this.lockedData=[]}c.prototype.subscribe=function(e){if(d.isFunction(e)){this.handlers.push(e)}return this};c.prototype.unsubscribe=function(f){for(var e=this.handlers.length-1;e>=0;e--){if(this.handlers[e]===f){this.handlers.splice(e,1)}}return this};c.prototype.unsubscribeAll=function(){this.handlers=[];return this};c.prototype.notify=function(){var e=arguments[0];if(this.isLocked===true){this.lockedData.push(e);return e}for(var f=0;f<this.handlers.length;f++){e=this.handlers[f].apply(null,arguments)}return e};c.prototype.lock=function(){this.isLocked=true;this.lockedData=[]};c.prototype.notifyLocked=function(){this.isLocked=false;return this.notify({data:this.lockedData})};function a(){return new c()}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(g,e){g.extend(true,e,{Cell:{Editor:{Create:d,Checkbox:f,Float:b,Integer:c,Text:h,Select:a}}});function f(j,k){var i=this,l=!j.value;this.destroy=function(){};this.getValue=function(){i.onChange.notify({value:l});return l};g.extend(this,{onInitialize:e.Callback.Create(),onChange:e.Callback.Create(),onDestroy:e.Callback.Create()});i.onInitialize.notify({value:j.value})}function b(l,m){var k=this,n=l.value,i=g('<input type="text" class="grid-float-editor" />').val(n).width(l.column.width);this.append=function(o){i.appendTo(o);return k};this.remove=function(){if(i&&i.length){i.detach()}return k};this.destroy=function(){i.remove();i=undefined;k.onDestroy.notify({})};this.getValue=function(){return j(i.val())};this.setValue=function(o){i.val(j(o));k.onChange.notify({value:o});return k};this.focus=function(){if(i.is(":focus")===false){i.val(k.getValue()).select()}return k};function j(o){return parseFloat(o,10)||0}g.extend(this,{onInitialize:e.Callback.Create(),onChange:e.Callback.Create(),onDestroy:e.Callback.Create()});k.onInitialize.notify({value:n})}function c(l,m){var k=this,n=l.value,i=g('<input type="text" class="grid-integer-editor" />').val(n).width(l.column.width);this.append=function(o){i.appendTo(o);return k};this.remove=function(){if(i&&i.length){i.detach()}return k};this.destroy=function(){i.remove();i=undefined;k.onDestroy.notify({})};this.getValue=function(){return j(i.val())};this.setValue=function(o){i.val(j(o));k.onChange.notify({value:o});return k};this.focus=function(){if(i.is(":focus")===false){i.val(k.getValue()).select()}return k};function j(o){return parseInt(o,10)||0}g.extend(this,{onInitialize:e.Callback.Create(),onChange:e.Callback.Create(),onDestroy:e.Callback.Create()});k.onInitialize.notify({value:n})}function h(k,l){var j=this,m=k.value,i=g('<input type="text" class="grid-text-editor"/>').val(m).width(k.column.width);this.append=function(n){i.appendTo(n);return j};this.remove=function(){if(i&&i.length){i.detach()}return j};this.destroy=function(){i.remove();i=undefined;j.onDestroy.notify({})};this.getValue=function(){return i.val()};this.setValue=function(n){i.val(n);j.onChange.notify({value:n});return j};this.focus=function(){if(i.is(":focus")===false){i.val(j.getValue()).select()}return j};g.extend(this,{onInitialize:e.Callback.Create(),onChange:e.Callback.Create(),onDestroy:e.Callback.Create()});j.onInitialize.notify({value:m})}function a(k,m){var j=this,l=k.value||{text:"",value:""},i=g('<select class="grid-select-editor"/>');this.append=function(n){i.appendTo(n);return j};this.remove=function(){if(i&&i.length){i.detach()}return j};this.destroy=function(){i.remove();i=undefined;j.onDestroy.notify({})};this.getValue=function(){return{text:i.find("option:selected").text(),value:i.val()}};this.setValue=function(n){i.val(n);j.onChange.notify({value:n});return j};this.focus=function(){i.focus();return j};this.setSource=function(n){if(n.constructor===Array){var o="";var q=false;for(var p=0;p<n.length;p++){q=l.value===n[p].value;o+='<option value="'+n[p].value+'"'+(q?" selected":"")+">"+n[p].text+"</option>"}i.append(o)}};g.extend(this,{onInitialize:e.Callback.Create(),onChange:e.Callback.Create(),onDestroy:e.Callback.Create()});j.onInitialize.notify({value:l})}function d(i,j,k){if(!i.length){throw new TypeError("Editor name is not defined")}if(k instanceof Object===false){throw new TypeError("Settings is not defined")}if(e.Utils.isFunction(i,e.Cell.Editor)===false){throw new TypeError("name is not defined")}return new e.Cell.Editor[i](j,k)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(e,a){e.extend(true,a,{Cell:{Formatter:{Checkbox:j,Date:b,Default:d,Float:h,Integer:f,Money:c,Select:i,None:d,Radio:g,Text:d}}});function d(m,l,n,k){return m!=null?m.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;"):""}function j(m,l,n,k){return m?"<i class='fa fa-check-square-o'></i>":"<i class='fa fa-square-o'></i>"}function g(m,l,n,k){return m?"<i class='fa fa-dot-circle-o'></i>":"<i class='fa fa-circle-o'></i>"}function h(m,l,n,k){return(parseFloat(m)||0).toFixed(k.formatter.floatFormatter.decimals).replace(/\d(?=(\d{3})+\.)/g,"$&,")}function f(m,l,n,k){return(parseInt(m,10)||0).toFixed(k.formatter.integerFormatter.decimals).replace(/\d(?=(\d{3})+\.)/g,"$&,")}function c(m,l,n,k){m=+m;if(!isNaN(m)){return new Intl.NumberFormat(k.formatter.moneyFormatter.locales,k.formatter.moneyFormatter.options).format(m)}return d(m,l,n,k)}function b(m,l,n,k){if(!(m instanceof Date)){m=Date.parse(m)}if(!isNaN(m)){return new Intl.DateTimeFormat(k.formatter.dateFormatter.locales,k.formatter.moneyFormatter.options).format(m)}return d(m,l,n,k)}function i(m,l,n,k){if(m instanceof Object){return m.text}return m}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(f,d){f.extend(true,d,{Column:{Comparer:{Default:b,Date:e,Number:c,String:g}}});function b(h){return function(k,j){var i=(h.field in k.item)?k.item[h.field]:null,l=(h.field in j.item)?j.item[h.field]:null;if(i instanceof Date&&l instanceof Date){i=i.getTime();l=l.getTime()}else{if(!isNaN(parseFloat(i))&&isFinite(i)){i++;l++}else{if(i&&typeof i.toString==="function"&&l&&typeof l.toString==="function"){i=i.toString().toLowerCase();l=l.toString().toLowerCase()}}}return(i==l?0:(i>l?h.sortOrder:-h.sortOrder))}}function c(i){var h=i.sortOrder;return function(l,k){var j=(i.field in l.item)?l.item[i.field]:null,m=(i.field in k.item)?k.item[i.field]:null;return(j-m)*h}}function a(i){var h=i.sortOrder;return function(l,k){var j=(i.field in l.item&&typeof l.item[i.field]==="string")?l.item[i.field].toLowerCase():null,m=(i.field in k.item&&typeof k.item[i.field]==="string")?k.item[i.field].toLowerCase():null;return j.localeCompare(m)*h}}function g(i){var h=i.sortOrder;return function(l,k){var j=(i.field in l.item&&typeof l.item[i.field]==="string")?l.item[i.field].toLowerCase():null,m=(i.field in k.item&&typeof k.item[i.field]==="string")?k.item[i.field].toLowerCase():null;return(j==m?0:(j>m?1*h:-1*h))}}function e(i){var h=i.sortOrder;return function(l,k){var j=(i.field in l.item)?l.item[i.field]:null,m=(i.field in k.item)?k.item[i.field]:null;return(new Date(j)-new Date(m))*h}}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Column:{Create:d,Model:e,ColumnData:a}});function a(){}a.prototype.align="";a.prototype.cellCssClass="";a.prototype.editable=true;a.prototype.editor=undefined;a.prototype.editMode=false;a.prototype.field="";a.prototype.filterable=false;a.prototype.formatter="Default";a.prototype.headerCssClass="";a.prototype.hidden=false;a.prototype.id=undefined;a.prototype.item=null;a.prototype.maxWidth=9999;a.prototype.minWidth=25;a.prototype.name="";a.prototype.resizeable=true;a.prototype.sortable=true;a.prototype.sortComparer="Default";a.prototype.sortOrder=0;a.prototype.width=50;function e(G){var w=this;var K=[];this.items={addItem:function(O){A(F(O));return w},addItems:function(O){if(O.length){w.onChange.lock();for(var P=0;P<O.length;P++){w.items.addItem(O[P])}w.onChange.notifyLocked()}return w},deleteItems:function(){return s()},deleteItemById:function(O){return D(O)},getItems:function(){var O=[];for(var P=0;P<K.length;P++){O.push(K[P].item)}return O},setItems:function(O){if(O.length){w.onChange.lock();K=[];for(var P=0;P<O.length;P++){w.items.addItem(O[P])}w.onChange.notifyLocked()}return w},updateItemById:function(Q,P){for(var O=0;O<K.length;O++){if(K[O].id===Q){K[O].item=P;w.onChange.notify({id:Q});break}}return w},updateItemByIndex:function(O,P){if(K[O]){K[O].item=P;w.onChange.notify({id:K[O].id})}return w}};function I(){K=[]}function n(O){if(K.length){return K.filter(O)}return[]}function o(P,O){if(K.length){return K.reduce(P,O)}}function H(O){if(K.length){K.sort(O)}return w}function t(){return K.length===0}function M(){return K.length}function A(O){if(O instanceof a){K.push(O);w.onChange.notify({id:O.id})}return w}function k(P){if(P.length){w.onChange.lock();for(var O=0;O<P.length;O++){A(P[O])}w.onChange.notifyLocked()}return w}function m(O){if(O instanceof a){D(O.id)}return w}function D(P){for(var O=0;O<K.length;O++){if(K[O].id===P){K.splice(O,1);w.onChange.notify({id:P});break}}return w}function N(O){if(K[O]){var P=K[O].id;K.splice(O,1);w.onChange.notify({id:P})}return w}function s(){if(K.length){w.onChange.lock();K=[];w.onChange.notifyLocked()}return w}function i(P){for(var O=0;O<K.length;O++){if(K[O].id===P){return K[O]}}}function h(O){return K[O]}function B(O){return K[O].id}function J(P){for(var O=0;O<K.length;O++){if(K[O].id===P){return O}}return -1}function C(Q,O){var P=i(Q);if(P&&O&&O in P){return P[O]}}function l(O,P){var Q=h(O);if(Q&&P&&P in Q){return Q[P]}}function j(){return K}function x(P,O){g(J(P),O);return w}function g(O,P){if(P instanceof a){K.splice(O+1,0,P);w.onChange.notify({id:P.id})}return w}function y(P,O){v(J(P),O);return w}function v(O,P){if(P instanceof a){K.splice(O,0,P);w.onChange.notify({id:P.id})}return w}function L(R,P,O){for(var Q=0;Q<K.length;Q++){if(K[Q].id===R){if(P&&P in K[Q]){K[Q][P]=O;w.onChange.notify({id:R})}break}}return w}function r(O,Q,P){if(Q&&Q in K[O]){K[O][Q]=P;w.onChange.notify({id:K[O].id})}return w}function z(P){if(P.length){w.onChange.lock();K=[];for(var O=0;O<P.length;O++){A(P[O])}w.onChange.notifyLocked()}return w}function q(P,O){w.onChange.lock();for(var Q=0;Q<K.length;Q++){K[Q][P]=O;w.onChange.notify({id:K[Q].id})}w.onChange.notifyLocked();return w}function u(O){if(O instanceof a){p(O.id,O)}return w}function p(Q,P){if(P instanceof a){for(var O=0;O<K.length;O++){if(K[O].id===Q){K[O]=P;w.onChange.notify({id:Q});break}}}return w}function f(O,P){if(P instanceof a){if(K[O]){K[O]=P;w.onChange.notify({id:P.id})}}return w}function E(P){if(P.length){w.onChange.lock();for(var O=0;O<P.length;O++){u(P[O])}w.onChange.notifyLocked()}return w}function F(P){if(P instanceof Object){var O=new a();if(b.Utils.isProperty(G.columns.idProperty,O)){O.id=O[G.columns.idProperty]}else{if(G.columns.newIdType==="number"){O.id=b.Utils.createId()}else{O.id=b.Utils.createGuid()}}O.name=P.name;O.field=P.field;O.item=P;if("align" in P){O.align=P.align}if("cellCssClass" in P){O.cellCssClass=P.cellCssClass}if("editable" in P){O.editable=P.editable}if("editor" in P){O.editor=P.editor}if("editMode" in P){O.editMode=P.editMode}if("filterable" in P){O.filterable=P.filterable}if("formatter" in P){O.formatter=P.formatter}if("headerCssClass" in P){O.headerCssClass=P.headerCssClass}if("hidden" in P){O.hidden=P.hidden}if("maxWidth" in P){O.maxWidth=P.maxWidth}if("minWidth" in P){O.minWidth=P.minWidth}if("resizeable" in P){O.resizeable=P.resizeable}if("sortable" in P){O.sortable=P.sortable}if("sortOrder" in P){O.sortOrder=P.sortOrder}if("sortComparer" in P){O.sortComparer=P.sortComparer}if("width" in P){O.width=P.width}return O}}c.extend(this,{destroy:I,onChange:b.Callback.Create(),filter:n,reduce:o,sort:H,total:M,addColumn:A,addColumns:k,createColumn:F,deleteColumn:m,deleteColumnById:D,deleteColumnByIndex:N,deleteColumns:s,getColumnById:i,getColumnByIndex:h,getColumnIdByIndex:B,getColumnIndexById:J,getColumnPropertyById:C,getColumnPropertyByIndex:l,getColumns:j,insertColumnAfterId:x,insertColumnAfterIndex:g,insertColumnBeforeId:y,insertColumnBeforeIndex:v,isEmpty:t,setColumnPropertyById:L,setColumnPropertyByIndex:r,setColumns:z,setColumnsProperty:q,updateColumn:u,updateColumnById:p,updateColumnByIndex:f,updateColumns:E})}function d(g,f){if(Array.isArray(g)===false){throw new TypeError("Data is not defined")}if(f instanceof Object===false){throw new TypeError("Settings is not defined")}return new e(f).items.addItems(g)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(e,d){e.extend(true,d,{Event:{Data:c,Handler:b,Create:a}});function c(j){for(var f in j){if(j.hasOwnProperty(f)){this[f]=j[f]}}var g=false;var i=false;var h=false;this.preventDefault=function(){if(j&&"event" in j&&typeof j.event.preventDefault==="function"){j.event.preventDefault()}h=true};this.isDefaultPrevented=function(){return h};this.stopPropagation=function(){if(j&&"event" in j&&typeof j.event.stopPropagation==="function"){j.event.stopPropagation()}g=true};this.isPropagationStopped=function(){return g};this.stopImmediatePropagation=function(){if(j&&"event" in j&&typeof j.event.stopImmediatePropagation==="function"){j.event.stopImmediatePropagation()}i=true};this.isImmediatePropagationStopped=function(){return i}}function b(){this.handlers=[]}b.prototype.subscribe=function(f){if(e.isFunction(f)){this.handlers.push(f)}return this};b.prototype.unsubscribe=function(g){for(var f=this.handlers.length-1;f>=0;f--){if(this.handlers[f]===g){this.handlers.splice(f,1)}}return this};b.prototype.unsubscribeAll=function(){this.handlers=[];return this};b.prototype.notify=function(g){if(typeof g!==c){g=new c(g)}for(var f=0;f<this.handlers.length&&g.isImmediatePropagationStopped()===false;f++){if(this.handlers[f].call(null,g)===false){this.stopImmediatePropagation();break}}};function a(){return new b()}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,a){c.extend(true,a,{Grid:{Create:d,Model:b}});function b(w,h,A){var s=this,u={},j="0.6.2 beta",t=a.Utils.createGuid();function x(){z(A.plugins);var C=["windowManager","view","viewModel"];for(var D=0;D<C.length;D++){h[C[D]].init()}s.onInitialize.notify({});return s}function B(){k();var C=["windowManager","view","viewModel","rowsModel","columnsModel"];for(var D=0;D<C.length;D++){h[C[D]].destroy();delete h[C[D]]}s.onDestroy.notify({})}function f(){return h.windowManager}function e(){return h.view}function p(){return h.viewModel}function n(){return h.rowsModel}function v(){return h.columnsModel}function y(){return A}function g(C){if(u[C]){return u[C]}}function m(){return u}function i(C){return u[C]!==undefined}function r(C,E){if(i(C)){l(C)}var D=a.Plugins.Create(C,h,A,E);if(!D){throw new Error("Plugin is not defined.")}u[C]=D}function z(C){var E=Object.keys(C);for(var D=0;D<E.length;D++){r(E[D],C[E[D]])}}function l(C){if(u[C]){u[C].destroy();delete u[C]}}function k(){var D=Object.keys(u);for(var C=0;C<D.length;C++){l(D[C])}}function o(){return j}function q(){return t}c.extend(this,{init:x,destroy:B,getId:q,getPlugin:g,getPlugins:m,getSettings:y,getVersion:o,getView:e,getViewModel:p,getRowsModel:n,getColumnsModel:v,getWindowManager:f,isRegisteredPlugin:i,registerPlugin:r,registerPlugins:z,unregisterPlugin:l,unregisterPlugins:k,onInitialize:a.Callback.Create(),onDestroy:a.Callback.Create()})}function d(n,o,i,p,f){var h=a.Settings.Create(p||{});var j=a.Row.Create(o||[],h);var g=a.Column.Create(i||[],h);var m=a.View.Model.Create(j,g,h,false);var l=a.View.Create(n,m,h,false);var k=a.View.Window.Create(l,h,false);var e=new b(n,{columnsModel:g,rowsModel:j,view:l,viewModel:m,windowManager:k},h);if(f!==false){e.init()}return e}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Handler:{Click:{Create:a,Handler:d}}});function d(m,h){m.on("click",i).on("mousedown",e).on("contextmenu",k).on("dblclick",f).on("keydown",g);function j(n){if(n&&n.target){var p=c(n.target).closest(h.cellIdentifier);if(p.length){var o=p.closest(h.rowIdentifier);if(o.length){return{cellIndex:p.index(),rowIndex:o.index(),event:n}}}}}function e(n){if(n.ctrlKey||n.shiftKey){document.getSelection().removeAllRanges();n.preventDefault()}}function i(n){var o=j(n);if(o&&h.handleClick){h.handleClick(o)}}function k(n){var o=j(n);if(o&&h.handleContextMenu){h.handleContextMenu(o)}}function f(n){var o=j(n);if(o&&h.handleDblClick){h.handleDblClick(o)}}function g(n){var o=j(n);if(o&&h.handleKeyDown){h.handleKeyDown(o)}}function l(){m.off("click",i).off("mousedown",e).off("contextmenu",k).off("dblclick",f).off("keydown",g);var o=Object.keys(h);for(var n=0;n<o.length;n++){delete h[o[n]]}}c.extend(this,{destroy:l})}function a(h,e){if(!h.length){throw new TypeError("Container is not defined or does not exist in the DOM.")}if(h.length!==1){throw new TypeError("There should be only 1 container.")}var g={rowIdentifier:"TR",cellIdentifier:"TD",handleClick:undefined,handleDblClick:undefined,handleContextMenu:undefined,handleKeyDown:undefined};var f=c.extend({},g,e);return new d(h,f)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Handler:{Resize:{Create:a,Handler:d}}});function d(n,g){var j,k,h,f=false;n.on("mousedown",g.handlerIdentifier,e);c(document).on("mousemove",i).on("mouseup",m);function e(o){j=c(this).closest(g.cellIdentifier);if(j.length){k=j.index();h=o.pageX;g.handleResizeStart({cellElement:j,cellIndex:k,event:o});f=true}}function i(o){if(f){var p=o.pageX-j.offset().left;if(p>0){g.handleResize({cellElement:j,cellIndex:k,xDelta:o.pageX-h,width:p,event:o})}}}function m(o){if(f){f=false;g.handleResizeStop({cellElement:j,cellIndex:k,event:o})}}function l(){n.off("mousedown",e);c(document).off("mousemove",i).off("mouseup",m);j=undefined;var p=Object.keys(g);for(var o=0;o<p.length;o++){delete g[p[o]]}}c.extend(this,{destroy:l})}function a(h,e){if(!h.length){throw new TypeError("Container is not defined or does not exist in the DOM.")}if(h.length!==1){throw new TypeError("There should be only 1 container.")}var g={cellIdentifier:"TD",handleResize:undefined,handleResizeStart:undefined,handleResizeStop:undefined,handlerIdentifier:undefined};var f=c.extend({},g,e);return new d(h,f)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{Handler:{Scroll:{Create:a,Handler:b}}});function b(n,f){if(f.resetTop){n[0].scrollTop=0}if(f.resetLeft){n[0].scrollLeft=0}var i,l,m=false,k=false,g={scrollTop:n[0].scrollTop,scrollLeft:n[0].scrollLeft};n.on("scroll",h);n.on("wheel",e);function e(o){clearTimeout(l);if(k===false){k=true;f.handleMouseWheelStart({event:o})}f.handleMouseWheel({event:o});l=setTimeout(function(){f.handleMouseWheelStop({event:o});k=false},f.latency)}function h(p){var o={scrollTop:n[0].scrollTop,scrollLeft:n[0].scrollLeft,topDelta:n[0].scrollTop-g.scrollTop,leftDelta:n[0].scrollLeft-g.scrollLeft,event:p};clearTimeout(i);if(m===false){m=true;f.handleScrollStart(o)}f.handleScroll(o);i=setTimeout(function(){f.handleScrollStop(o);m=false},f.latency);g={scrollTop:o.scrollTop,scrollLeft:o.scrollLeft}}function j(){clearTimeout(i);clearTimeout(l);n.off("scroll",h);n.off("wheel",e);var p=Object.keys(f);for(var o=0;o<p.length;o++){delete f[p[o]]}}d.extend(this,{destroy:j})}function a(h,e){if(!h.length){throw new TypeError("Container is not defined or does not exist in the DOM.")}if(h.length!==1){throw new TypeError("There should be only 1 container.")}var g={handleMouseWheel:undefined,handleMouseWheelStart:undefined,handleMouseWheelStop:undefined,handlescroll:undefined,handlescrollStart:undefined,handlescrollStop:undefined,latency:300,resetLeft:true,resetTop:true};var f=d.extend({},g,e);return new b(h,f)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{Handler:{Shared:{GetInstance:e,Handler:a}}});function a(l){var j=this,h;d(window).on("click",i).on("contextmenu",g).on("resize",m);function i(n){j.onClick.notify({event:n})}function g(n){j.onContextMenu.notify({event:n})}function m(n){if(h){clearTimeout(h)}h=setTimeout(function(){j.onResize.notify({event:n})},l.latency)}function f(){return l}function k(){clearTimeout(h);d(window).off("click",i).off("contextmenu",g).off("resize",m)}d.extend(this,{onClick:c.Event.Create(),onContextMenu:c.Event.Create(),onResize:c.Event.Create(),getSettings:f,destroy:k})}var b;function e(f){if(!b){var h={latency:400};var g=d.extend({},h,f);b=new a(g)}return b}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{Create:a}});function a(d,e,f,h){if(!d.length){throw new Error("Plugin name is not defined.")}if(e.view instanceof b.View.View===false){throw new TypeError("View is not defined")}if(e.windowManager instanceof b.View.Window.Manager===false){throw new TypeError("WindowManager is not defined")}if(f instanceof Object===false){throw new TypeError("Settings is not defined")}if(b.Utils.isFunction(d,b.Plugins)!==true){throw new TypeError("name is not defined")}f.plugins[d]=jQuery.extend(true,f.plugins[d]||{},h||{});var g=new b.Plugins[d](e,f);return g.init()}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{Query:{Column:{Request:b,Create:a}}});function b(f){function g(j,m,o){var l=0,p=false,k=j-m-o,i=j+2*m+o,n=0;return function(r,q,s){if(r.hidden===true){return false}n++;p=k<=l&&l<=i;l+=o+r.width;if(p||(k<=l&&l<=i)){r.calcWidth=l;r.calcIndex=n;return true}return false}}function e(k,i,j){return f.filter(g(k,i,j))}function h(l){var m={width:0,count:0};var k=f.getColumns();for(var j=0;j<k.length;j++){if(k[j].hidden===true){continue}m.width+=k[j].width+l;m.count++}return m}d.extend(this,{getColumnsInRange:e,getColumnsTotal:h})}function a(e){if(e instanceof c.Column.Model===false){throw new TypeError("Column model is not defined.")}return new c.Query.Column.Request(e)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Query:{Filter:a}});function a(p){var t=this,n=[],e=b.Utils.createGuid();function f(){return e}function i(){return p}function m(){n=[];return t}function g(){return n}function s(u,v){if(u in t){return t[u](v||"")}throw new TypeError("Type "+u+" not found.")}function l(){n.push({action:"and"});return t}function k(){n.push({action:"or"});return t}function r(u){n.push({action:"eq",value:u});return t}function q(u){n.push({action:"neq",value:u});return t}function j(u){n.push({action:"startsWith",value:u});return t}function d(u){n.push({action:"endsWith",value:u});return t}function h(u){n.push({action:"contains",value:u});return t}function o(u){n.push({action:"doesNotContain",value:u});return t}c.extend(this,{getId:f,getField:i,clear:m,get:g,add:s,and:l,or:k,contains:h,doesnotcontain:o,endswith:d,eq:r,neq:q,startswith:j})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{Query:{Row:{Request:b,Create:a}}});function b(i){function j(n,o,m){var k="";var l=o.replace(/'/g,"\\'");switch(m){case"and":k+=" && ";break;case"or":k+=" || ";break;case"eq":k+=" (item.item['"+n+"'] == '"+l+"') === true ";break;case"neq":k+=" (item.item['"+n+"'] == '"+l+"') === false ";break;case"startsWith":k+=" (('' + item.item['"+n+"']).indexOf('"+l+"') === 0) === true ";break;case"endsWith":k+=" (('' + item.item['"+n+"']).indexOf('"+l+"', item.item['"+n+"'].length - '"+l+"'.length) !== -1) === true ";break;case"contains":k+=" (('' + item.item['"+n+"']).indexOf('"+l+"') !== -1) === true ";break;case"doesNotContain":k+=" (('' + item.item['"+n+"']).indexOf('"+l+"') !== -1) === false ";break}return k}function h(p){var n="";for(var m=0;m<p.length;m++){var l=p[m].get(),q=p[m].getField(),k="";for(var o=0;o<l.length;o++){k+=j(q,l[o].value,l[o].action)}if(k.length){if(m!==0){n+=" && "}n+="("+k+")"}}if(n.length){return new Function("item","return "+n)}}function e(k,s,q,l){var r=0,p=false,m=k-s-q,o=k+2*s+q,n=0;return function(u,t,v){if(l&&(l(u)===false)||(u.hidden===true)){return false}n++;p=m<=r&&r<=o;r+=q+u.height;if(p||(m<=r&&r<=o)){u.calcHeight=r;u.calcIndex=n;return true}return false}}function f(p,k,n,o,m){for(var l=0;l<o.length;l++){i.sort(c.Column.Comparer[o[l].getSortComparer()]({sortOrder:o[l].getSortOrder(),field:o[l].getField()}))}return i.filter(e(p,k,n,h(m)))}function g(k,o){var n={height:0,count:0};var p=i.getRows();var m=h(o);for(var l=0;l<p.length;l++){if((m&&(m(p[l])===false))||(p[l].hidden===true)){continue}n.height+=p[l].height+k;n.count++}return n}d.extend(this,{getRowsInRange:f,getRowsTotal:g})}function a(e){if(e instanceof c.Row.Model===false){throw new TypeError("Rows model is not defined.")}return new c.Query.Row.Request(e)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Query:{Sorter:a}});function a(j,f,l){var k=this,d=b.Utils.createGuid();function e(){return d}function g(){return j}function i(){return f}function h(){return l}c.extend(this,{getId:e,getField:g,getSortOrder:i,getSortComparer:h})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{Row:{Create:e,Model:a,RowData:b}});function b(){}b.prototype.cellCssClass="";b.prototype.disabled=false;b.prototype.editable=true;b.prototype.editMode=false;b.prototype.height=20;b.prototype.hidden=false;b.prototype.id=undefined;b.prototype.item=null;b.prototype.maxHeight=200;b.prototype.minHeight=20;b.prototype.rowCssClass="";function a(E){var y=this;var K=[];this.items={addItem:function(O){f(g(O));return y},addItems:function(O){if(O.length){y.onChange.lock();for(var P=0;P<O.length;P++){y.items.addItem(O[P])}y.onChange.notifyLocked()}return y},deleteItems:function(){return k()},deleteItemById:function(O){return j(O)},getItems:function(){var O=[];for(var P=0;P<K.length;P++){O.push(K[P].item)}return O},setItems:function(O){if(O.length){y.onChange.lock();K=[];for(var P=0;P<O.length;P++){y.items.addItem(O[P])}y.onChange.notifyLocked()}return y},updateItemById:function(Q,P){for(var O=0;O<K.length;O++){if(K[O].id===Q){K[O].item=P;y.onChange.notify({id:Q});break}}return y},updateItemByIndex:function(O,P){if(K[O]){K[O].item=P;y.onChange.notify({id:K[O].id})}return y}};function H(){K=[]}function t(O){if(K.length){return K.filter(O)}return[]}function u(P,O){if(K.length){return K.reduce(P,O)}}function F(O){if(K.length){K.sort(O)}return y}function w(){return K.length===0}function N(){return K.length}function p(P){if(P.length){y.onChange.lock();for(var O=0;O<P.length;O++){f(P[O])}y.onChange.notifyLocked()}return y}function A(P){if(P.length){y.onChange.lock();for(var O=0;O<P.length;O++){n(P[O])}y.onChange.notifyLocked()}return y}function B(P){if(P.length){y.onChange.lock();K=[];for(var O=0;O<P.length;O++){f(P[O])}y.onChange.notifyLocked()}return y}function C(P,O){y.onChange.lock();for(var Q=0;Q<K.length;Q++){K[Q][P]=O;y.onChange.notify({id:K[Q].id})}y.onChange.notifyLocked();return y}function k(){if(K.length){y.onChange.lock();K=[];y.onChange.notifyLocked()}return y}function f(O){if(O instanceof b){K.push(O);y.onChange.notify({id:O.id})}return y}function z(O){if(O instanceof b){j(O.id)}return y}function j(P){for(var O=0;O<K.length;O++){if(K[O].id===P){K.splice(O,1);y.onChange.notify({id:P});break}}return y}function M(O){if(K[O]){var P=K[O].id;K.splice(O,1);y.onChange.notify({id:P})}return y}function q(P){for(var O=0;O<K.length;O++){if(K[O].id===P){return K[O]}}}function G(O){return K[O]}function m(O){return K[O].id}function s(P){for(var O=0;O<K.length;O++){if(K[O].id===P){return O}}return -1}function o(Q,O){var P=q(Q);if(P&&O&&O in P){return P[O]}}function x(O,P){var Q=G(O);if(Q&&P&&P in Q){return Q[P]}}function J(){return K}function I(P,O){v(s(P),O);return y}function v(O,P){if(P instanceof b){K.splice(O+1,0,P);y.onChange.notify({id:P.id})}return y}function L(P,O){h(s(P),O);return y}function h(O,P){if(P instanceof b){K.splice(O,0,P);y.onChange.notify({id:P.id})}return y}function l(R,P,O){for(var Q=0;Q<K.length;Q++){if(K[Q].id===R){if(P&&P in K[Q]){K[Q][P]=O;y.onChange.notify({id:R})}break}}return y}function D(O,Q,P){if(Q&&Q in K[O]){K[O][Q]=P;y.onChange.notify({id:K[O].id})}return y}function n(O){if(O instanceof b){r(O.id,O)}return y}function r(Q,P){if(P instanceof b){for(var O=0;O<K.length;O++){if(K[O].id===Q){K[O]=P;y.onChange.notify({id:Q});break}}}return y}function i(O,P){if(P instanceof b){if(K[O]){K[O]=P;y.onChange.notify({id:P.id})}}return y}function g(O){if(O instanceof Object){var P=new b();if(c.Utils.isProperty(E.rows.idProperty,O)){P.id=O[E.rows.idProperty]}else{if(E.rows.newIdType==="number"){P.id=c.Utils.createId()}else{P.id=c.Utils.createGuid()}}P.item=O;if("cellCssClass" in O){P.cellCssClass=O.cellCssClass}if("disabled" in O){P.disabled=O.disabled}if("editable" in O){P.editable=O.editable}if("editMode" in O){P.editMode=O.editMode}if("height" in O){P.height=O.height}if("hidden" in O){P.hidden=O.hidden}if("maxHeight" in O){P.maxHeight=O.maxHeight}if("minHeight" in O){P.minHeight=O.minHeight}if("rowCssClass" in O){P.rowCssClass=O.rowCssClass}return P}}d.extend(this,{destroy:H,onChange:c.Callback.Create(),filter:t,reduce:u,sort:F,total:N,addRow:f,addRows:p,createRow:g,deleteRow:z,deleteRowById:j,deleteRowByIndex:M,deleteRows:k,getRowById:q,getRowByIndex:G,getRowIdByIndex:m,getRowIndexById:s,getRowPropertyById:o,getRowPropertyByIndex:x,getRows:J,insertRowAfterId:I,insertRowAfterIndex:v,insertRowBeforeId:L,insertRowBeforeIndex:h,isEmpty:w,setRowPropertyById:l,setRowPropertyByIndex:D,setRows:B,setRowsProperty:C,updateRow:n,updateRowById:r,updateRowByIndex:i,updateRows:A})}function e(g,f){if(Array.isArray(g)===false){throw new TypeError("Data is not defined")}if(f instanceof Object===false){throw new TypeError("Settings is not defined")}return new a(f).items.addItems(g)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(f,c){var d=function(){var m=[];for(var l=0;l<256;l++){m[l]=l<16?"0"+l.toString(16):l.toString(16)}return function(){var q=Math.random()*4294967295|0,s=Math.random()*4294967295|0,p=Math.random()*4294967295|0,o=Math.random()*4294967295|0;return(m[q&255]+m[q>>8&255]+m[q>>16&255]+m[q>>24&255]+"-"+m[s&255]+m[s>>8&255]+"-"+m[s>>16&15|64]+m[s>>24&255]+"-"+m[p&63|128]+m[p>>8&255]+"-"+m[p>>16&255]+m[p>>24&255]+m[o&255]+m[o>>8&255]+m[o>>16&255]+m[o>>24&255]).toLowerCase()}}();var g=function(){var l=0;return function(){return""+l++}}();function b(m,l){return l&&m&&m in l&&typeof l[m]==="function"}function j(l,m){return l&&l in m}function a(l){return(/^true$/i).test(l)}function k(){var n=1000000,m=1000000,l=f('<div style="display:none; " />').appendTo(document.body);do{l.css("height",m);if(l.height()===m){m+=n}else{break}}while(m<16000000);l.remove();return m-n}function i(){var l=f('<div style="position:absolute; top:-100px; left:-100px; width:100px; height:100px; overflow:scroll;"></div>').appendTo(document.body);var m={width:l.width()-l[0].clientWidth,height:l.height()-l[0].clientHeight};l.remove();return m}function e(l){var n=f("<table class='grid-content-table' style='position:absolute; top:-100px; left:-100px;'><tbody><tr><td class='"+l+"' style='width:5px; height:5px;'>-</td></tr></tbody></table>").appendTo(document.body);var o=n.find("TD");var m={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()};n.remove();n=o=undefined;return m}function h(l){return l<0?1:-1}f.extend(true,c,{Utils:{changeSortOrder:h,createGuid:d,createId:g,isFunction:b,isProperty:j,measureCellDiff:e,measureMaxSupportedCssHeight:k,measureScrollbar:i,parseBool:a}})})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{View:{Builder:{Create:a,Builder:d}}});function d(t){var p=this;function u(z){var y={headerCol:null,headerTbody:null,headerTable:null,headerWrap:null,contentCol:null,contentTbody:null,contentTable:null,contentWrap:null,header:null,content:null,footer:null,preload:null,viewport:null,container:z};y.viewport=c("<div class='grid-viewport'/>");y.header=c("<div class='grid-header'/>");y.content=c("<div class='grid-content'/>");y.footer=c("<div class='grid-footer'/>");y.preload=c("<div class='grid-preload-font'/>");y.headerCol=c("<colgroup></colgroup>");y.headerTable=c("<table class='grid-header-table'></table>");y.headerTbody=c("<tbody></tbody>");y.headerWrap=c("<div class='grid-header-wrap'/>");y.contentCol=c("<colgroup></colgroup>");y.contentTable=c("<table class='grid-content-table'></table>");y.contentTbody=c("<tbody></tbody>");y.contentWrap=c("<div class='grid-content-wrap'/>");y.headerCol.appendTo(y.headerTable);y.headerTbody.appendTo(y.headerTable);y.headerTable.appendTo(y.headerWrap);y.headerWrap.appendTo(y.header);y.contentCol.appendTo(y.contentTable);y.contentTbody.appendTo(y.contentTable);y.contentTable.appendTo(y.contentWrap);y.contentWrap.appendTo(y.content);y.header.appendTo(y.viewport);y.content.appendTo(y.viewport);y.footer.appendTo(y.viewport);y.preload.appendTo(y.viewport);if(t.header.disableTextSelection){y.header.addClass(t.cssClass.disableTextSelection)}if(t.rows.disableTextSelection){y.content.addClass(t.cssClass.disableTextSelection)}return y}function o(A,C){var z="<tr class='"+t.cssClass.headerRow+"'>";for(var y=0,B=A.length-1;y<=B;y++){z+=k(A[y],C,B===y)}if(C.virtualColumnWidth>=0&&t.showLastColumn===true){z+=l(A[y-1],C)}return z+"</tr>"}function f(z,A,B){var y=[t.cssClass.headerCell];if(z.headerCssClass){y.push(z.headerCssClass)}if(B&&A.hideColumnBorder){y.push(t.cssClass.cellColumnLast)}if(z.sortable||z.filterable){y.push(t.cssClass.cursorPointer)}return p.onHeaderColumnCss.notify(y,{column:z,opts:A,isLastColumn:B}).join(" ")}function k(z,A,B){var y;y="<td style='height:"+t.header.height+"px' class='"+f(z,A,B)+"'><div class='"+t.cssClass.headerCellDiv+"'><span class='"+t.cssClass.headerColumnName+"'>"+(z.name||"")+"</span>";if(z.sortable&&z.sortOrder!==0){y+="<span class='"+(z.sortOrder===1?t.cssClass.headerSortUp:t.cssClass.headerSortDown)+"' data-click-type='sort'></span>"}if(z.filterable){y+="<span class='"+t.cssClass.headerFilter+"' data-click-type='menu'></span>"}y+="</div>";if(z.resizeable){y+="<span class='"+t.cssClass.headerResizeHandle+"' data-click-type='resize'></span>"}return y+"</td>"}function l(y,z){return"<td class='"+t.cssClass.headerCell+" "+t.cssClass.cellColumnLast+"' style='height:"+t.header.height+"px'></td>"}function q(A,C){var z="";for(var y=0,B=A.length;y<B;y++){z+=s(A[y])}if(C.virtualColumnWidth>=0&&t.showLastColumn===true){z+=n(A[y-1],C)}return z}function i(z){var y=t.cssClass.col;if(z.headerCssClass){y+=" "+z.headerCssClass}return y}function s(y){return"<col style='width:"+(y.width+t.cellOuterSize.width)+"px;' class='"+i(y)+"'/>"}function n(y,z){return"<col style='width:"+z.virtualColumnWidth+"px;' class='"+t.cssClass.col+" "+t.cssClass.collLast+"'/>"}function x(A,D,C){var z="";for(var y=0,B=D.length-1;y<=B;y++){z+=e(A,D[y],C,B===y)}return z}function j(y,B,A,C){var z=[t.cssClass.row,B.calcIndex&1===1?t.cssClass.rowEven:t.cssClass.rowOdd];if(B.rowCssClass){z.push(B.rowCssClass)}return p.onRowCss.notify(z,{columns:y,row:B,opts:A,isLastRow:C}).join(" ")}function e(A,D,C,E){var z="<tr class='"+j(A,D,C,E)+"'>";for(var y=0,B=A.length-1;y<=B;y++){z+=v(A[y],D,C,B===y,E)}if(C.virtualColumnWidth>=0&&t.showLastColumn===true){z+=g(A[y-1],C,E)}return z+"</tr>"}function r(z,C,A,B,D){var y=[t.cssClass.cell];if(z.cellCssClass){y.push(z.cellCssClass)}if(B&&A.hideColumnBorder){y.push(t.cssClass.cellColumnLast)}if(D&&A.hideRowBorder){y.push(t.cssClass.cellRowLast)}if(C.cellCssClass&&z.field in C.cellCssClass){y.push(C.cellCssClass[z.field])}return p.onCellCss.notify(y,{column:z,row:C,opts:A,isLastColumn:B,isLastRow:D}).join(" ")}function v(y,B,z,A,C){return"<td height='"+B.height+"' class='"+r(y,B,z,A,C)+"'>"+m(y,B)+"</td>"}function g(z,A,B){var y=t.cssClass.cell+" "+t.cssClass.cellColumnLast;if(B&&A.hideRowBorder){y+=" "+t.cssClass.cellRowLast}return"<td class='"+y+"'></td>"}function m(y,A){var z="";if(y.field in A.item&&(A.editMode===false||y.editMode===false)){z=h(y,A)}return z}function h(y,z){return y.formatter?b.Cell.Formatter[y.formatter](w(y,z),y,z,t):w(y,z)}function w(y,z){return z.item[y.field]}c.extend(this,{buildCellContentHtml:m,buildColsHtml:q,buildHeaderColumnsHtml:o,buildRowsHtml:x,buildViewPortElements:u,onHeaderColumnCss:b.Callback.Create(),onRowCss:b.Callback.Create(),onCellCss:b.Callback.Create()})}function a(e){if(e instanceof Object===false){throw new TypeError("Settings is not defined")}return new d(e)}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{View:{Create:d,View:a}});function a(o,ap,N,am){var s=this,P={width:0,height:0},aq={rowsHeight:0,columnsWidth:0},aj={},f=[],y=null,D=null,L=null,m={horisontal:false,vertical:false},u=[],h=false,z=0;aj=N.buildViewPortElements(o);aj.container.empty().addClass(am.uid);aj.viewport.appendTo(aj.container);function ah(){var ar=j();f.push(b.Handler.Resize.Create(aj.header,{handleResize:n,handleResizeStart:e,handleResizeStop:F,handlerIdentifier:"."+am.cssClass.headerResizeHandle}),b.Handler.Click.Create(aj.header,{handleClick:S,handleDblClick:I,handleContextMenu:ad}),b.Handler.Click.Create(aj.content,{handleClick:B,handleDblClick:Z,handleContextMenu:an,handleKeyDown:M}),b.Handler.Scroll.Create(aj.content,{handleScrollStart:af,handleScrollStop:al,handleScroll:ae,handleMouseWheelStart:T,handleMouseWheelStop:G,handleMouseWheel:ab}));var at=b.Handler.Shared.GetInstance();at.onClick.subscribe(ak);at.onResize.subscribe(t);at.onContextMenu.subscribe(g);ap.onRowsChange.subscribe(x);ap.onColumnsChange.subscribe(k);ap.onInitialize.subscribe(Q);l(ar);return s}function aa(){j();clearTimeout(D);clearTimeout(L);ap.onRowsChange.unsubscribe(x);ap.onColumnsChange.unsubscribe(k);ap.onInitialize.unsubscribe(Q);var av=b.Handler.Shared.GetInstance();av.onClick.unsubscribe(ak);av.onResize.unsubscribe(t);av.onContextMenu.unsubscribe(g);if(aj.container.length){for(var au=0;au<f.length;au++){f[au].destroy();f[au]=undefined}aj.container.removeClass(am.uid);delete aj.container}var at=Object.keys(aj);for(var ar=0;ar<at.length;ar++){aj[at[ar]].remove();delete aj[at[ar]]}o.empty()}function Q(){var ar=j();C();H();l(ar);s.onInitialize.notify({})}function ao(){return P}function ai(){return N}function ac(){return m.horisontal}function q(){return m.vertical}function i(ar){if(aj[ar]){return aj[ar]}}function X(at){var ar=ap.getColumnById(at);if(ar){return ar.calcWidth-ar.width-am.cellOuterSize.width>=aj.content[0].scrollLeft&&ar.calcWidth<P.width+aj.content[0].scrollLeft}return false}function Y(ar){var at=ap.getRowById(ar);if(at){return at.calcHeight-at.height-am.cellOuterSize.height>=aj.content[0].scrollTop&&at.calcHeight+at.height+am.cellOuterSize.height<P.height+aj.content[0].scrollTop}return false}function R(ar){return aj.contentTbody[0].rows[ar]}function O(ar){var at=ap.getRowIndexById(ar);if(at!==-1){return R(at)}}function V(ar,at){return X(ar)&&Y(at)}function A(ar,at){if(aj.contentTbody[0].rows[at]&&aj.contentTbody[0].rows[at].cells[ar]){return aj.contentTbody[0].rows[at].cells[ar]}}function p(at,au){var av=ap.getRowIndexById(au);var ar=ap.getColumnIndexById(at);if(av!==-1&&ar!==-1){return A(ar,av)}}function U(){z++;J();return s}function J(){if(z>0){if(y!==null||v()===true){clearTimeout(D);D=setTimeout(U,187)}else{y++;clearTimeout(D);H();if(am.renderDelay){L=setTimeout(function(){y=null},am.renderDelay)}else{y=null}}}return s}function H(){var aw=j();z=0;var au=1;if(aq.rowsHeight>=am.maxSupportedCssHeight){var ax=P.height+(m.horisontal?am.scrollbarDimensions.height:0);au=(aq.rowsHeight-ax)/(am.maxSupportedCssHeight-ax)}var ar=ap.requestDataFromRange({top:aj.content[0].scrollTop*au,left:aj.content[0].scrollLeft},P,am.cellOuterSize,{width:m.vertical?am.scrollbarDimensions.width:0,height:m.horisontal?am.scrollbarDimensions.height:0},au===1);if(ar.isCached===0){if(ar.columns.length>0){aj.headerTable.css({left:ar.columns[0].calcWidth-ar.columns[0].width-am.cellOuterSize.width});if(ar.rows.length>0){aj.contentTable.css({top:ar.rows[0].calcHeight-ar.rows[0].height-am.cellOuterSize.height-aj.content[0].scrollTop*au+aj.content[0].scrollTop,left:ar.columns[0].calcWidth-ar.columns[0].width-am.cellOuterSize.width})}var at=ar.columns[ar.columns.length-1];var av={hideRowBorder:m.horisontal===false&&m.vertical===true,hideColumnBorder:m.vertical===false&&P.width<=at.calcWidth,virtualColumnWidth:am.showLastColumn===true&&P.width>=at.calcWidth?P.width-at.calcWidth:0};E(N.buildHeaderColumnsHtml(ar.columns,av),N.buildColsHtml(ar.columns,av),N.buildRowsHtml(ar.columns,ar.rows,av))}else{E("","","")}}l(aw)}function E(au,at,ay){s.onBeforeRowsRendered.notify({});var ax=aj.contentTbody[0].cloneNode(false);var ar=aj.headerTbody[0].cloneNode(false);var aw=aj.headerCol[0].cloneNode(false);var av=aj.contentCol[0].cloneNode(false);aw.innerHTML=av.innerHTML=at;ax.innerHTML=ay;ar.innerHTML=au;if(aj.contentCol[0].innerHTML!==av.innerHTML){aj.contentTable[0].replaceChild(av,aj.contentCol[0]);aj.contentCol=c(av)}if(aj.contentTbody[0].innerHTML!==ax.innerHTML){aj.contentTable[0].replaceChild(ax,aj.contentTbody[0]);aj.contentTbody=c(ax)}if(aj.headerCol[0].innerHTML!==aw.innerHTML){aj.headerTable[0].replaceChild(aw,aj.headerCol[0]);aj.headerCol=c(aw)}if(aj.headerTbody[0].innerHTML!==ar.innerHTML){aj.headerTable[0].replaceChild(ar,aj.headerTbody[0]);aj.headerTbody=c(ar)}s.onAfterRowsRendered.notify({})}function v(){return u.length>0}function j(at){var ar=b.Utils.createGuid();u.push(ar);if(at){at();return l(ar)}return ar}function l(at){for(var ar=0;ar<u.length;ar++){if(u[ar]===at){u.splice(ar,1);return true}}return false}function W(ar){var at=ap.getColumnByIndex(ar.cellIndex);if(at){ar.type=c(ar.event.target).attr("data-click-type")||"";ar.column=at;return ar}}function ag(ar){var at=ap.getColumnByIndex(ar.cellIndex);var au=ap.getRowByIndex(ar.rowIndex);if(at&&at.field.length>0&&au&&at.field in au.item){ar.row=au;ar.column=at;return ar}}function r(ar,at){s[at].notify(ar)}function C(){P.width=aj.container.width();P.height=Math.max(aj.container.height()-am.header.height-am.cellOuterSize.height,0);if(P.height){aj.content.height(P.height)}aq.rowsHeight=ap.getRowsHeight(am.cellOuterSize);aq.columnsWidth=ap.getColumnsWidth(am.cellOuterSize);w();s.onViewResized.notify({});return s}function K(at,av,au){var ar={vertical:false,horisontal:false};if(at.columnsWidth>av.width){ar.vertical=at.rowsHeight+au.height>av.height;ar.horisontal=true}else{if(at.rowsHeight>av.height){ar.horisontal=at.columnsWidth+au.width>av.width;ar.vertical=true}}return ar}function w(){var at=m;m=K(aq,P,am.scrollbarDimensions);if(m.vertical!==at.vertical||m.horisontal!==at.horisontal){aj.content.css({overflow:m.vertical||m.horisontal?"auto":"hidden"});aj.header.css({width:m.vertical?P.width-am.scrollbarDimensions.width:P.width});s.onViewScrollChange.notify({})}var au=Math.max(aq.columnsWidth,m.vertical?P.width-am.scrollbarDimensions.width:P.width);var ar=aq.columnsWidth?Math.min(aq.rowsHeight,am.maxSupportedCssHeight):0;aj.headerWrap.css({width:au});aj.contentWrap.css({width:au,height:ar})}function x(){aq.rowsHeight=ap.getRowsHeight(am.cellOuterSize);w();U()}function k(){aq.columnsWidth=ap.getColumnsWidth(am.cellOuterSize);w();U()}function B(ar){var at=ag(ar);if(at){r(at,"onCellClick")}}function Z(ar){var at=ag(ar);if(at){r(at,"onCellDblClick")}}function an(ar){var at=ag(ar);if(at){r(at,"onCellContextMenu")}}function M(ar){var at=ag(ar);if(at){r(at,"onCellKeyDown")}}function n(ar){r(ar,"onColumnResize")}function e(ar){h=true;r(ar,"onColumnResizeStart")}function F(ar){h=false;r(ar,"onColumnResizeStop")}function T(ar){r(ar,"onMouseWheelStart")}function G(ar){r(ar,"onMouseWheelStop")}function ab(ar){r(ar,"onMouseWheel")}function af(ar){if(h===false){r(ar,"onScrollStart")}}function al(ar){if(h===false){r(ar,"onScrollStop")}}function ae(ar){if(h===false){aj.header[0].scrollLeft=aj.content[0].scrollLeft;U();r(ar,"onScroll")}}function t(ar){j(function(){r(ar,"onDocumentResize");C();H()})}function g(ar){r(ar,"onDocumentContextMenu")}function ak(ar){r(ar,"onDocumentClick")}function S(ar){var at=W(ar);if(at){r(at,"onHeaderClick")}}function ad(ar){var at=W(ar);if(at){r(at,"onHeaderContextMenu")}}function I(ar){var at=W(ar);if(at){r(at,"onHeaderDblClick")}}c.extend(this,{init:ah,destroy:aa,getBuilder:ai,getContentSize:ao,getCellNodeById:p,getCellNodeByIndex:A,getNode:i,getRowNodeById:O,getRowNodeByIndex:R,isCellVisible:V,isColumnVisible:X,isHorisontalScrollVisible:ac,isRowVisible:Y,isSuspended:v,isVerticalScrollVisible:q,render:U,resize:C,resumeRender:l,suspendRender:j,onViewResized:b.Event.Create(),onViewScrollChange:b.Event.Create(),onScroll:b.Event.Create(),onScrollStart:b.Event.Create(),onScrollStop:b.Event.Create(),onMouseWheel:b.Event.Create(),onMouseWheelStart:b.Event.Create(),onMouseWheelStop:b.Event.Create(),onDocumentClick:b.Event.Create(),onDocumentResize:b.Event.Create(),onDocumentContextMenu:b.Event.Create(),onHeaderClick:b.Event.Create(),onHeaderContextMenu:b.Event.Create(),onHeaderDblClick:b.Event.Create(),onCellClick:b.Event.Create(),onCellContextMenu:b.Event.Create(),onCellDblClick:b.Event.Create(),onCellKeyDown:b.Event.Create(),onColumnResize:b.Event.Create(),onColumnResizeStart:b.Event.Create(),onColumnResizeStop:b.Event.Create(),onAfterRowsRendered:b.Event.Create(),onBeforeRowsRendered:b.Event.Create(),onInitialize:b.Callback.Create(),onDestroy:b.Callback.Create()})}function d(f,h,j,i){var k=c(f);if(!k.length){throw new TypeError("Container is not defined or does not exist in the DOM.")}if(k.length!==1){throw new TypeError("There should be only 1 container.")}if(h instanceof b.View.Model.Model===false){throw new TypeError("View model is not defined.")}if(j instanceof Object===false){throw new TypeError("Settings is not defined")}var g=b.View.Builder.Create(j);var e=new a(k,h,g,j);if(i!==false){e.init()}return e}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{View:{Model:{Model:a,Create:d}}});function a(G,g,w,K,R){var j=this,k={count:0,height:0},B={count:0,width:0};var T=[],l=[];var x={minTop:undefined,maxTop:undefined,minLeft:undefined,maxLeft:undefined};var C=[],h=[],S=[];function P(){G.onChange.subscribe(q);g.onChange.subscribe(i);j.onInitialize.notify({});return j}function M(){G.onChange.unsubscribe(q);g.onChange.unsubscribe(i);C=[];h=[];S=[];T=undefined;l=undefined}function i(V){A();if(V.data){var X=[];for(var W=0;W<V.data.length;W++){if(V.data[W].id){X.push(V.data[W].id)}}j.onColumnsChange.notify({ids:X})}else{if(V.id){j.onColumnsChange.notify({ids:[V.id]})}}}function q(V){S=h.slice();U();if(V.data){var X=[];for(var W=0;W<V.data.length;W++){if(V.data[W].id){X.push(V.data[W].id)}}j.onRowsChange.notify({ids:X})}else{if(V.id){j.onRowsChange.notify({ids:[V.id]})}}}function t(){return T}function F(){return l}function Q(V){return T[V]}function E(V){return l[V]}function L(W){for(var V=0;V<T.length;V++){if(T[V].id===W){return V}}return -1}function J(W){for(var V=0;V<l.length;V++){if(l[V].id===W){return V}}return -1}function D(W){for(var V=0;V<T.length;V++){if(T[V].id===W){return T[V]}}}function z(W){for(var V=0;V<l.length;V++){if(l[V].id===W){return l[V]}}}function p(){return k}function r(){return B}function N(){return C}function s(W){if(W instanceof b.Query.Filter){for(var V=0;V<C.length;V++){if(C[V].getId()===W.getId()){break}}C[V]=W;U();j.onRowsChange.notify()}}function v(W){for(var V=0;V<C.length;V++){if(C[V].getField()===W){C.splice(V,1);U();j.onRowsChange.notify();break}}}function o(W){for(var V=0;V<C.length;V++){if(C[V].getId()===W){C.splice(V,1);U();j.onRowsChange.notify();break}}}function f(){C=[];U();j.onRowsChange.notify()}function n(){return h}function O(V){if(V instanceof b.Query.Sorter){h=[V];S=h.slice();U();j.onRowsChange.notify()}}function e(W){for(var V=0;V<h.length;V++){if(h[V].getId()===W){h.splice(V,1);S=h.slice();U();j.onRowsChange.notify();break}}}function u(W){for(var V=0;V<h.length;V++){if(h[V].getField()===W){h.splice(V,1);S=h.slice();U();j.onRowsChange.notify();break}}}function y(){h=[];S=[];U();j.onRowsChange.notify()}function I(V){k=w.getRowsTotal(V.height,C);return k.height}function H(V){B=K.getColumnsTotal(V.width);return B.width}function m(V,Y,W,aa,Z){var X=(x.minTop<=V.top&&V.top<=x.maxTop+aa.height)&Z;var ab=(x.minLeft<=V.left&&V.left<=x.maxLeft+aa.width)&Z;if(X===0){T=w.getRowsInRange(V.top,Y.height,W.height,S,C);S=[];U(T,Y,W);j.onCacheRowsChange.notify({})}if(ab===0){l=K.getColumnsInRange(V.left,Y.width,W.width);A(l,Y,W);j.onCacheColumnsChange.notify({})}return{isCached:X&&ab,rows:T,columns:l}}function A(X,W,V){if(X&&X.length){x.minLeft=X[0].calcWidth-X[0].width-V.width;x.maxLeft=X[(X.length-1)].calcWidth>W.width?X[(X.length-1)].calcWidth-W.width:W.width}else{x.minLeft=undefined;x.maxLeft=undefined}}function U(X,W,V){if(X&&X.length){x.minTop=X[0].calcHeight-X[0].height-V.height;x.maxTop=X[(X.length-1)].calcHeight>W.height?X[(X.length-1)].calcHeight-W.height:W.height}else{x.minTop=undefined;x.maxTop=undefined}}c.extend(this,{init:P,destroy:M,getRowsTotal:p,getColumnsTotal:r,requestDataFromRange:m,clearFilterByField:v,clearFilterById:o,clearFilters:f,clearSorterByField:u,clearSorterById:e,clearSorters:y,getFilters:N,getSorters:n,setFilter:s,setSorter:O,getColumnById:z,getColumnByIndex:E,getColumnIndexById:J,getColumns:F,getColumnsWidth:H,getRowById:D,getRowByIndex:Q,getRowIndexById:L,getRows:t,getRowsHeight:I,onInitialize:b.Callback.Create(),onDestroy:b.Callback.Create(),onColumnsChange:b.Callback.Create(),onRowsChange:b.Callback.Create(),onCacheColumnsChange:b.Callback.Create(),onCacheRowsChange:b.Callback.Create()})}function d(f,j,i,h){if(i instanceof Object===false){throw new TypeError("Settings is not defined")}if(f instanceof b.Row.Model===false){throw new TypeError("Rows model is not defined.")}if(j instanceof b.Column.Model===false){throw new TypeError("Column model is not defined.")}var k=new b.Query.Row.Create(f);var e=new b.Query.Column.Create(j);var g=new a(f,j,k,e,i);if(h!==false){g.init()}return g}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(d,c){d.extend(true,c,{View:{Window:{Create:a,Manager:b}}});function b(n,h){var t=this;var e=[];function s(x,w,u){if(g(x)===false){e.push({id:x,opts:u||{}});var v=d('<div class="grid-window grid-window-'+x+'"/>');if(w&&w.length){w.appendTo(v)}v.appendTo(n.getNode("container")).hide()}return t}function g(v){for(var u=0;u<e.length;u++){if(e[u].id===v){return true}}return false}function f(v){for(var u=0;u<e.length;u++){if(e[u].id===v){return{id:e[u].id,opts:e[u].opts,container:n.getNode("container").children(".grid-window-"+v)}}}return t}function k(w){for(var u=0;u<e.length;u++){if(e[u].id===w){e.splice(u,1);var v=n.getNode("container").children(".grid-window-"+w);if(v.length){v.remove()}break}}return t}function m(B,u,y){var w=y||0;var x=f(B);if(x!==null){x.container.show();var A=n.getNode("container");var v={width:x.container.width(),height:x.container.height()};var z=(v.width+u.x>A.width()&&v.width<u.x-A.offset().left)?u.x-v.width+w:u.x-w;x.container.offset({top:u.y-w,left:z})}return t}function r(A,u){var x=f(A);if(x!==null){x.container.show();var z=n.getNode("container");var v={width:x.container.width(),height:x.container.height()};var w={left:u.offset().left,top:u.offset().top,width:u.width(),height:u.height()};var y=(v.width+w.left>z.width()&&v.width<w.left-z.offset().left)?w.left+w.width-v.width:w.left;x.container.offset({top:w.top+w.height,left:y})}return t}function i(u){return n.getNode("container").children(".grid-window-"+u+":visible").length>0}function l(u){n.getNode("container").children(".grid-window-"+u).show();return t}function p(u){n.getNode("container").children(".grid-window-"+u).hide();return t}function j(){n.getNode("container").children(".grid-window").hide();return t}function q(){n.onDocumentClick.subscribe(j);n.onColumnResizeStart.subscribe(j);return t}function o(){n.onDocumentClick.unsubscribe(j);n.onColumnResizeStart.unsubscribe(j);e=[]}d.extend(this,{init:q,destroy:o,createWindow:s,showWindowNearPosition:m,showWindowNearTarget:r,getWindow:f,hideWindow:p,hideWindows:j,isWindow:g,isVisible:i,removeWindow:k,showWindow:l})}function a(f,h,g){if(f instanceof c.View.View===false){throw new TypeError("View is not defined")}if(h instanceof Object===false){throw new TypeError("Settings is not defined")}var e=new c.View.Window.Manager(f,h);if(g!==false){e.init()}return e}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,a){c.extend(true,a,{Plugins:{CellAlign:b}});function d(e,f,g){}function b(e,g){var q=this;var o={enabled:false};function p(){if(!g.plugins.CellAlign){g.plugins.CellAlign={enabled:false}}e.view.getBuilder().onHeaderColumnCss.subscribe(j);e.view.getBuilder().onCellCss.subscribe(h);e.view.getBuilder().onRowCss.subscribe(m);return q}function n(){e.view.getBuilder().onHeaderColumnCss.unsubscribe(j);e.view.getBuilder().onCellCss.unsubscribe(h);e.view.getBuilder().onRowCss.unsubscribe(m)}function h(t,u){switch(u.column.align){case"center":t.push(g.cssClass.cellAlignCenter);break;case"right":t.push(g.cssClass.cellAlignRight);break}return t}function j(t,u){switch(u.column.align){case"center":t.push(g.cssClass.cellAlignCenter);break;case"right":t.push(g.cssClass.cellAlignRight);break}return t}function m(u,t){switch(t.row.valign||g.rows.valign){case"middle":u.push(g.cssClass.rowValignMiddle);break;case"top":u.push(g.cssClass.rowValignTop);break;case"bottom":u.push(g.cssClass.rowValignBottom);break;case"baseline":u.push(g.cssClass.rowValignBaseline);break}return u}function l(u,v){if(u){var t=e.view.suspendRender();e.rowsModel.setRowPropertyById(column.id,"valign",v);e.view.resumeRender(t)}}function s(t,v){if(t){var u=e.view.suspendRender();e.columnsModel.setColumnPropertyById(t.id,"align",v);e.view.resumeRender(u)}}function i(t,u){s(e.columnsModel.getColumnByIndex(t))}function f(u,t){s(e.columnsModel.getColumnById(u))}function k(t,u){l(e.rowsModel.getRowByIndex(t))}function r(u,t){l(e.rowsModel.getRowById(u),t)}c.extend(this,{init:p,destroy:n,alignRowByIdx:k,alignRowById:r,alignColumnByIndex:i,alignColumnById:f})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,a){c.extend(true,a,{Plugins:{CellEdit:b}});function b(d,r){var m=this;var i={enabled:false};function q(){if(!r.plugins.CellEdit){r.plugins.CellEdit={enabled:false,editOnClick:false,autoFocus:true}}d.view.onAfterRowsRendered.subscribe(j);d.view.onBeforeRowsRendered.subscribe(h);d.view.onCellClick.subscribe(s);d.view.onCellDblClick.subscribe(g);d.view.onCellKeyDown.subscribe(p);d.view.onScrollStop.subscribe(l);d.view.getBuilder().onCellCss.subscribe(o);return m}function t(){d.view.onAfterRowsRendered.unsubscribe(j);d.view.onBeforeRowsRendered.unsubscribe(h);d.view.onCellClick.unsubscribe(s);d.view.onCellDblClick.unsubscribe(g);d.view.onCellKeyDown.unsubscribe(p);d.view.onScrollStop.unsubscribe(l);d.view.getBuilder().onCellCss.unsubscribe(o);k()}function o(v,w){if(w.row.editMode===true&&w.column.editMode===true){v.push(r.cssClass.cellEdit)}else{switch(w.column.editor){case"Date":v.push("grid-date-icon-formatter");break;case"Checkbox":break;case"Float":case"Integer":case"Text":v.push("grid-text-icon-formatter");break;case"Select":v.push("grid-select-icon-formatter");break}}return v}function l(v){if(u()===true&&r.plugins.CellEdit.autoFocus===true&&r.plugins.CellEdit.enabled===true){if(d.view.isCellVisible(i.column.id,i.row.id)){i.editor.focus()}}}function h(v){if(u()===true&&r.plugins.CellEdit.enabled===true){i.editor.remove()}}function j(w){if(u()===true&&r.plugins.CellEdit.enabled===true){var v=d.view.getCellNodeById(i.column.id,i.row.id);if(v){i.editor.append(v);if(i.addFocusOnce===true){i.addFocusOnce=false;i.editor.focus()}}}}function g(v){if(r.plugins.CellEdit.enabled!==true){return}if(u()===true&&v.column.id===i.column.id&&v.row.id===i.row.id){i.editor.focus()}if(r.plugins.CellEdit.editOnClick===false){f(v.column.id,v.row.id)}}function s(v){if(r.plugins.CellEdit.enabled!==true){return}if(u()===true&&v.column.id===i.column.id&&v.row.id===i.row.id){i.editor.focus()}if(r.plugins.CellEdit.editOnClick===true){f(v.column.id,v.row.id)}}function p(v){if(v&&v.event&&r.plugins.CellEdit.enabled===true){switch(v.event.keyCode){case 13:if(v.event.target&&v.event.target.tagName!=="TEXTAREA"){n()}break;case 27:k();break}}}function f(y,z){if(u()===true){if(i.column.id!==y||i.row.id!==z){n()}}if(u()===false){var w=d.viewModel.getColumnById(y);var A=d.viewModel.getRowById(z);if(A&&w&&A.editable&&w.editable&&w.editor){var x=d.view.suspendRender();i={enabled:true,addFocusOnce:true,row:A,column:w,editor:a.Cell.Editor.Create(w.editor,{row:A,column:w,value:A.item[w.field],windowManager:d.windowManager,settings:r},r)};m.onCellEdited.notify({row:i.row,column:i.column,editor:i.editor});d.columnsModel.setColumnPropertyById(w.id,"editMode",true);d.rowsModel.setRowPropertyById(A.id,"editMode",true);var v=d.view.getCellNodeById(w.id,A.id);if(v){v.className+=" "+r.cssClass.cellEdit;v.innerHTML=""}d.view.resumeRender(x);if(a.Utils.isFunction("append",i.editor)===false){n()}}}}function e(){if(u()===true){return i.editor}}function u(){return i.enabled===true}function n(){if(u()===true){var x=d.view.suspendRender();var w=d.columnsModel.getColumnById(i.column.id);var y=d.rowsModel.getRowById(i.row.id);if(w&&y){w.editMode=false;d.columnsModel.updateColumn(w);y.item[i.column.field]=i.editor.getValue();y.editMode=false;d.rowsModel.updateRow(y);var v=d.view.getCellNodeById(i.column.id,i.row.id);if(v){v.className=v.className.replace(" "+r.cssClass.cellEdit,"");v.innerHTML=d.view.getBuilder().buildCellContentHtml(w,y)}}i.editor.destroy();i={enabled:false};d.view.resumeRender(x)}return m}function k(){if(u()===true){var x=d.view.suspendRender();var w=d.columnsModel.getColumnById(i.column.id);var y=d.rowsModel.getRowById(i.row.id);if(w&&y){w.editMode=false;d.columnsModel.updateColumn(w);y.editMode=false;d.rowsModel.updateRow(y);var v=d.view.getCellNodeById(i.column.id,i.row.id);if(v){v.className=v.className.replace(" "+r.cssClass.cellEdit,"");v.innerHTML=d.view.getBuilder().buildCellContentHtml(w,y)}}i.editor.destroy();i={enabled:false};d.view.resumeRender(x)}return m}c.extend(this,{init:q,destroy:t,applyEdit:n,cancelEdit:k,editCellById:f,getEditor:e,isEditMode:u,onCellEdited:a.Callback.Create()})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{AutoResize:a}});function a(g,h){var d=this;function k(){if(!h.plugins.AutoResize){h.plugins.AutoResize={enabled:false}}g.view.onViewResized.subscribe(j);return d}function f(){g.view.onViewResized.unsubscribe(j)}function j(){if(h.plugins.AutoResize.enabled===true){e()}}function i(n,q,r){var m=g.view.getContentSize();var t=n.slice();var w={minWidth:0,maxWidth:0,width:0},l=m.width-t.length*r-q;for(var s=t.length-1;s>=0;s--){var v=t[s];if(v.resizeable===false){l-=v.width;t.splice(s,1);continue}w.minWidth+=v.minWidth;w.maxWidth+=v.maxWidth;w.width+=v.width}if(w.minWidth<=l&&l<=w.maxWidth){var p=t.slice();while(p.length>0){var u=l/w.width;w.width=0;for(s=p.length-1;s>=0;s--){var o=p[s];var x=Math.max(Math.min(Math.floor(o.width*u),o.maxWidth),o.minWidth);w.width+=x;if(o.width===x){if(p.length===1&&l!==o.width){o.width+=l-o.width}l-=o.width;p.splice(s,1);continue}o.width=x}}}return t}function e(){var l=i(g.columnsModel.getColumns(),g.view.isVerticalScrollVisible()===true?h.scrollbarDimensions.width:0,h.cellOuterSize.width);g.view.suspendRender(function(){g.columnsModel.updateColumns(l)});return d}c.extend(this,{init:k,destroy:f,resizeColumns:e})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{ColumnFilterMenu:a}});function a(e,f){var r=this,m=null;function q(){if(!f.plugins.ColumnFilterMenu){f.plugins.ColumnFilterMenu={enabled:false}}e.view.onHeaderClick.subscribe(n);e.view.onScrollStart.subscribe(l);return r}function j(){e.view.onHeaderClick.unsubscribe(n);e.view.onScrollStart.unsubscribe(l)}function l(){if(f.plugins.ColumnFilterMenu.enabled===true){k()}}function n(t){if(t&&t.type&&t.type==="menu"&&f.plugins.ColumnFilterMenu.enabled===true){t.stopPropagation();m=t.column.id;var s=e.windowManager.isVisible(t.column.id);e.windowManager.hideWindows();if(e.windowManager.isWindow(t.column.id)===false){e.windowManager.createWindow(t.column.id,p(t.column.id),{filter:new b.Query.Filter(t.column.field)});e.windowManager.showWindowNearTarget(t.column.id,c(t.event.target))}else{if(s===false){e.windowManager.showWindow(t.column.id)}}}}function p(v){var s=c("<div class='grid-header-menu'></div>");var t=c("<form>");var u=c('<div class="grid-header-menu-content"></div>').append('<select name="type1"><option value="contains">Contains</option><option value="doesnotcontain">Does not contains</option><option value="eq">Is equal to</option><option value="neq">Is not equal to</option><option value="startswith">Starts with</option><option value="endswith">Ends with</option></select>').append('<input type="text" name="value1" value=""/>').append('<select name="operator"><option value="and">And</option><option value="or">Or</option></select>').append('<select name="type2"><option value="contains">Contains</option><option value="doesnotcontain">Does not contains</option><option value="eq">Is equal to</option><option value="neq">Is not equal to</option><option value="startswith">Starts with</option><option value="endswith">Ends with</option></select>').append('<input type="text" name="value2" value=""/>').append('<input type="submit" name="Filter" value="Filter" class="btn-submit"/>').append('<input type="reset" name="Clear" value="Clear" class="btn-clear"/>').appendTo(t);t.on("submit",{id:v},h);t.on("reset",{id:v},i);t.on("click",{id:v},o);t.appendTo(s);return s}function d(s){return{value:[s.find("input[name='value1']").val(),s.find("input[name='value2']").val()],type:[s.find("select[name='type1']").val(),s.find("select[name='type2']").val()],operator:s.find("select[name='operator']").val()}}function h(s){s.preventDefault();var v=e.windowManager.getWindow(s.data.id);if(v&&v.opts){var u=e.columnsModel.getColumnById(s.data.id);if(u){var t=v.opts.filter;var w=d(v.container);v.opts.filter.clear();v.opts.filter.add(w.type[0],w.value[0]);if(w.value[1]){v.opts.filter.add(w.operator);v.opts.filter.add(w.type[1],w.value[1])}u.headerCssClass+=" "+f.cssClass.headerFilterActive;e.columnsModel.updateColumn(u);e.viewModel.setFilter(t);e.windowManager.hideWindow(s.data.id)}}}function i(s){var u=e.windowManager.getWindow(s.data.id);if(u){var t=e.columnsModel.getColumnById(s.data.id);if(t){t.headerCssClass=t.headerCssClass.replace(" "+f.cssClass.headerFilterActive,"");e.columnsModel.updateColumn(t);e.viewModel.clearFilterById(u.opts.filter.getId());e.windowManager.hideWindow(s.data.id)}}}function o(s){s.stopPropagation()}function k(){if(m!==null){e.windowManager.hideWindow(m);m=null}}function g(s){var t=e.view.suspendRender();e.viewModel.setFilter(s);e.view.resumeRender(t)}c.extend(this,{init:q,destroy:j,filterRows:g})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{ColumnPickerMenu:a}});function a(e,g){var r=this;var l="column-picker";function q(){if(!g.plugins.ColumnPickerMenu){g.plugins.ColumnPickerMenu={enabled:false}}e.view.onHeaderContextMenu.subscribe(d);return r}function m(){e.view.onHeaderContextMenu.unsubscribe(d)}function d(t){if(t&&g.plugins.ColumnPickerMenu.enabled===true){t.preventDefault();e.windowManager.hideWindows();if(e.windowManager.isWindow(l)===false){e.windowManager.createWindow(l,s(l))}else{var u=e.windowManager.getWindow(l);if(u){u.container.empty().append(s(l))}}e.windowManager.showWindowNearPosition(l,{x:t.event.pageX,y:t.event.pageY},10)}}function s(v){var t=c("<div class='grid-columnpicker-menu'></div>");var u=c('<div class="grid-columnpicker-menucontent"></div>').appendTo(t);t.on("click",{id:v},p);t.on("mouseenter",{id:v},j);c(f()).appendTo(u);return t}function f(){var w="";var v=e.columnsModel.getColumns();var t=v.length-h(v);for(var u=0,x=v.length;u<x;u++){w+='<div><label><input type="checkbox" name="" '+(v[u].hidden===true?"":" checked ")+' value="'+v[u].id+'" '+(t===1&&v[u].hidden===false?' disabled="disabled" ':"")+"/> "+v[u].name+"</label></div>"}return w}function h(v){var t=0;for(var u=0;u<v.length;u++){if(v[u].hidden===true){t++}}return t}function j(t){c(this).off("mouseleave").on("mouseleave",function(){e.windowManager.hideWindow(t.data.id)})}function p(u){u.stopPropagation();if(u.target){var x=c(u.target).closest("input");if(x.length){var w=e.viewModel.getColumns();var y;var t=w.length-h(w);if(t===1&&x[0].checked===false){return false}if(t===1&&x[0].checked===true){y=e.windowManager.getWindow(l);if(y){y.container.find("input:disabled").removeAttr("disabled")}}else{if(t===2&&x[0].checked===false){y=e.windowManager.getWindow(l);if(y){var v=y.container.find("input:checked");if(v.length){v.attr("disabled","disabled")}}}}e.columnsModel.setColumnPropertyById(x.val(),"hidden",!x[0].checked)}}}function i(t){e.columnsModel.setColumnPropertyById(t,"hidden",true)}function k(t){e.columnsModel.setColumnPropertyByIndex(t,"hidden",true)}function o(t){e.columnsModel.setColumnPropertyById(t,"hidden",false)}function n(t){e.columnsModel.setColumnPropertyByIndex(t,"hidden",false)}c.extend(this,{init:q,destroy:m,hideColumnById:i,hideColumnByIndex:k,showColumnById:o,showColumnByIndex:n})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{ColumnResize:a}});function a(g,j){var p=this,k,h={},f;function o(){if(!j.plugins.ColumnResize){j.plugins.ColumnResize={enabled:false}}g.view.onColumnResize.subscribe(e);g.view.onColumnResizeStart.subscribe(i);g.view.onColumnResizeStop.subscribe(l);return p}function n(){g.view.onColumnResize.unsubscribe(e);g.view.onColumnResizeStart.unsubscribe(i);g.view.onColumnResizeStop.unsubscribe(l);var q=Object.keys(h);for(var r=0;r<q.length;r++){h[q[r]].remove();delete h[q[r]]}k=null}function e(q){if(k&&h.lastHeaderCol.length&&j.plugins.ColumnResize.enabled===true){f=Math.max(Math.min(parseInt(q.width,10),k.maxWidth),k.minWidth);if(h.headerCol.length){h.headerCol.css("width",f+j.cellOuterSize.width)}if(h.contentCol.length){h.contentCol.css("width",f+j.cellOuterSize.width)}}}function i(q){if(j.plugins.ColumnResize.enabled!==true){return}k=g.viewModel.getColumnByIndex(q.cellIndex);h={headerCursorCells:g.view.getNode("headerTbody").find("."+j.cssClass.cursorPointer),headerCol:g.view.getNode("headerTable").find("colgroup > col:nth-child("+(q.cellIndex+1)+")"),contentCol:g.view.getNode("contentTable").find("colgroup > col:nth-child("+(q.cellIndex+1)+")"),lastHeaderCol:g.view.getNode("headerTable").find("colgroup > col:last"),lastContentCol:g.view.getNode("contentTable").find("colgroup > col:last"),contentCell:"",headerCell:""};if(k&&h.lastHeaderCol.length){if(j.showLastColumn===true&&h.lastHeaderCol.hasClass(j.cssClass.collLast)){h.lastHeaderCol.width(c(window).width());if(h.lastContentCol.length){h.lastContentCol.width(c(window).width())}}h.headerCell=g.view.getNode("headerTable").find("td."+j.cssClass.cellColumnLast);if(h.headerCell.length){d(h.headerCell,j.cssClass.cellColumnLast)}h.contentCell=g.view.getNode("contentTable").find("td."+j.cssClass.cellColumnLast);if(h.contentCell.length){d(h.contentCell,j.cssClass.cellColumnLast)}d(h.headerCursorCells,j.cssClass.cursorPointer);g.view.getNode("viewport").addClass(j.cssClass.cursorResize)}}function l(){if(k&&j.plugins.ColumnResize.enabled===true){if(h.headerCell.length){m(h.headerCell,j.cssClass.cellColumnLast)}if(h.contentCell.length){m(h.contentCell,j.cssClass.cellColumnLast)}m(h.headerCursorCells,j.cssClass.cursorPointer);g.view.getNode("viewport").removeClass(j.cssClass.cursorResize);if(f){g.columnsModel.setColumnPropertyById(k.id,"width",f)}}}function m(r,q){r.toggleClass(q+" "+q+"-disabled")}function d(r,q){r.toggleClass(q+"-disabled "+q)}c.extend(this,{init:o,destroy:n})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{ColumnSort:a}});function a(d,g){var l=this;function k(){if(!g.plugins.ColumnSort){g.plugins.ColumnSort={enabled:false}}d.view.onHeaderClick.subscribe(j);return l}function i(){d.view.onHeaderClick.unsubscribe(j)}function j(m){if(m&&(m.type===""||m.type==="sort")&&g.plugins.ColumnSort.enabled===true){var n=d.view.suspendRender();e(m.column);d.view.resumeRender(n)}}function e(o,n){if(o){var m=n===undefined?b.Utils.changeSortOrder(o.sortOrder):n;d.columnsModel.setColumnsProperty("sortOrder",0);d.columnsModel.setColumnPropertyById(o.id,"sortOrder",m);d.viewModel.setSorter(new b.Query.Sorter(o.field,m,o.sortComparer))}}function h(p,n){var m=d.columnsModel.getColumnById(p);if(m){var o=d.view.suspendRender();e(m,n);d.view.resumeRender(o)}}function f(m,o){var n=d.columnsModel.getColumnByIndex(m);if(n){var p=d.view.suspendRender();e(n,o);d.view.resumeRender(p)}}c.extend(this,{init:k,destroy:i,sortColumnById:h,sortColumnByIndex:f})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(c,b){c.extend(true,b,{Plugins:{Footer:a}});function a(e,h){var m=this;var j=0;function l(){if(!h.plugins.Footer){h.plugins.Footer={enabled:false}}e.viewModel.onCacheRowsChange.subscribe(f);e.viewModel.onCacheColumnsChange.subscribe(f);e.view.onInitialize.subscribe(d);return m}function k(){e.viewModel.onRowsChange.unsubscribe(f);e.viewModel.onCacheColumnsChange.unsubscribe(f);e.view.onInitialize.unsubscribe(d)}function d(){if(h.plugins.Footer.enabled===true){e.view.getNode("footer").css({display:"block"});g(e.viewModel.getRowsTotal().count,e.viewModel.getColumnsTotal().count)}}function f(){if(h.plugins.Footer.enabled===true){g(e.viewModel.getRowsTotal().count,e.viewModel.getColumnsTotal().count)}}function g(p,n){if(n==0){i(0,0,0)}else{if(j!=p){var o=e.viewModel.getRows();if(o.length){j=p;i(p,o[0].calcIndex,o[o.length-1].calcIndex)}}}}function i(o,n,q){var p=e.view.getNode("footer");if(o){p.html("Showing "+n+" to "+q+" of  "+o)}else{p.html("No data available")}}c.extend(this,{init:l,destroy:k})}})(jQuery,window.SmallGrid=window.SmallGrid||{});(function(b,a){b.extend(true,a,{Plugins:{RowSelection:c}});function c(e,t){var n=this,j=[],w=null;function r(){if(!t.plugins.RowSelection){t.plugins.RowSelection={enabled:false,multipleRowSelection:false}}e.view.onCellClick.subscribe(u);return n}function v(){e.view.onCellClick.unsubscribe(u)}function u(x){if(t.plugins.RowSelection.enabled!==true){return}var y=e.view.suspendRender();if(x.event.shiftKey===true&&t.plugins.RowSelection.multipleRowSelection===true&&w&&w!==x.row.id){m(w,x.row.id)}else{if(x.event.ctrlKey===true){if(o(x.row.id)===true){g(x.row.id)}else{if(t.plugins.RowSelection.multipleRowSelection===false){s()}f(x.row.id)}}else{if(o(x.row.id)===false||j.length>1){s();f(x.row.id)}}}e.view.resumeRender(y);if(x.event.shiftKey===false){w=x.row.id}}function d(y){if(y){j.push(y.id);var x=e.view.getRowNodeById(y.id);if(x){x.className=x.className+" "+t.cssClass.rowSelected}e.rowsModel.setRowPropertyById(y.id,"rowCssClass",y.rowCssClass+(y.rowCssClass.length?" ":"")+t.cssClass.rowSelected)}}function h(z){if(z){var x=j.indexOf(z.id);if(x!==-1){j.splice(x,1)}var y=e.view.getRowNodeById(z.id);if(y){y.className=y.className.replace(" "+t.cssClass.rowSelected,"")}e.rowsModel.setRowPropertyById(z.id,"rowCssClass",z.rowCssClass.replace(" "+t.cssClass.rowSelected,"").replace(t.cssClass.rowSelected,""))}}function f(y){var x=e.view.suspendRender();d(e.rowsModel.getRowById(y));e.view.resumeRender(x);return n}function g(y){var x=e.view.suspendRender();h(e.rowsModel.getRowById(y));e.view.resumeRender(x);return n}function l(x){var y=e.view.suspendRender();d(e.rowsModel.getRowByIndex(x));e.view.resumeRender(y);return n}function k(x){var y=e.view.suspendRender();h(e.rowsModel.getRowByIndex(x));e.view.resumeRender(y);return n}function i(x,B){if(x>-1&&B>-1){var z=e.view.suspendRender();var C=Math.min(B,x);var A=Math.max(B,x);for(var y=C;y<=A;y++){d(e.rowsModel.getRowByIndex(y))}e.view.resumeRender(z)}return n}function m(B,E){var x=e.rowsModel.getRowIndexById(B);var A=e.rowsModel.getRowIndexById(E);if(x!==-1&&A!==-1){var z=e.view.suspendRender();var D=Math.min(A,x);var C=Math.max(A,x);for(var y=D;y<=C;y++){d(e.rowsModel.getRowByIndex(y))}e.view.resumeRender(z)}}function s(){var z=e.view.suspendRender();var x=p().slice();for(var y=0;y<x.length;y++){g(x[y])}e.view.resumeRender(z);return n}function q(){var y=e.view.suspendRender();var z=e.rowsModel.getRows();for(var x=0;x<z.length;x++){f(z[x])}e.view.resumeRender(y);return n}function o(x){return j.indexOf(x)!==-1}function p(){return j}b.extend(this,{init:r,destroy:v,deselectAllRows:s,deselectRowById:g,deselectRowByIndex:k,getSelectedRowsIds:p,isRowSelected:o,selectAllRows:q,selectRowById:f,selectRowByIndex:l,selectRowsRangeById:m,selectRowsRangeByIndex:i})}})(jQuery,window.SmallGrid=window.SmallGrid||{});if(typeof jQuery==="undefined"){throw new Error("Small grid requires jquery module to be loaded.")}if(typeof SmallGrid==="undefined"){throw new Error("Small grid required to be loaded.")}(function(c,b){var a={renderDelay:0,showLastColumn:true,uidPrefix:"smallgrid_",maxSupportedCssHeight:undefined,scrollbarDimensions:undefined,cellOuterSize:undefined,uid:undefined,cssClass:{disableTextSelection:"disable-text-selection",cell:"grid-cell",cellEdit:"grid-cell-edit",cellColumnLast:"grid-cell-column-last",cellRowLast:"grid-cell-row-last",col:"grid-col",collLast:"grid-coll-last",cursorPointer:"grid-cursor-pointer",cursorResize:"grid-cursor-resize disable-text-selection",headerCell:"grid-header-cell",headerCellDiv:"grid-header-cell-div",headerColumnName:"grid-column-name",headerFilter:"grid-header-filter",headerFilterActive:"grid-header-filter-active",headerResizeHandle:"grid-resizable-handle",headerRow:"grid-header-row",headerSortable:"grid-sortable",headerSortDown:"grid-sort-icon grid-sort-icon-desc",headerSortUp:"grid-sort-icon grid-sort-icon-asc",row:"grid-row",rowEven:"grid-row-even",rowOdd:"grid-row-odd",rowSelected:"grid-row-selected",rowValignMiddle:"grid-row-valign-middle",rowValignTop:"grid-row-valign-top",rowValignBottom:"grid-row-valign-bottom",rowValignBaseline:"grid-row-valign-baseline",cellAlignCenter:"grid-cell-align-center",cellAlignRight:"grid-cell-align-right"},header:{height:20,disableTextSelection:true},columns:{idProperty:undefined,newIdType:""},rows:{disableTextSelection:false,idProperty:undefined,newIdType:"",valign:""},formatter:{floatFormatter:{decimals:2},integerFormatter:{decimals:0},moneyFormatter:{locales:"en-US",options:{currency:"EUR",style:"currency"}},dateFormatter:{locales:"en-US",options:{}}},plugins:{AutoResize:{enabled:true},ColumnSort:{enabled:true},ColumnResize:{enabled:true},RowSelection:{enabled:true,multipleRowSelection:false},CellEdit:{enabled:true,editOnClick:false,autoFocus:true},ColumnFilterMenu:{enabled:true},ColumnPickerMenu:{enabled:true},Footer:{enabled:false},CellAlign:{enabled:false}}};function d(f){var e=c.extend(true,{},a,f||{});if(e.maxSupportedCssHeight===undefined){a.maxSupportedCssHeight=e.maxSupportedCssHeight=b.Utils.measureMaxSupportedCssHeight()}if(e.scrollbarDimensions===undefined){a.scrollbarDimensions=e.scrollbarDimensions=b.Utils.measureScrollbar()}if(e.cellOuterSize===undefined){e.cellOuterSize=b.Utils.measureCellDiff(e.cssClass.cell)}if(e.uid===undefined){e.uid=b.Utils.createGuid()}return e}c.extend(true,b,{Settings:{Create:d,Default:a}})})(jQuery,window.SmallGrid=window.SmallGrid||{});